{% extends "base.html" %}
{% block extra_js %}
{{ block.super }}
<script async src="https://b.stripecdn.com/connect-js/v0.1/connect.js"></script>
{% endblock %}
{% load static %}


{% block content %}

<div class="container">
    <h1>Payments</h1>
    <div>
        <stripe-connect-payments></stripe-connect-payments>
    </div>
</div>
{% endblock %}

{% block postload-js %}
{{ stripe_public_key|json_script:"id_stripe_public_key" }}
{{ client_secret|json_script:"id_client_secret" }}
{{ block.super }}
<script async src="https://b.stripecdn.com/connect-js/v0.1/connect.js"></script>
<script>
    window.StripeConnect || = {};
    StripeConnect.onLoad = () => {
        StripeConnect.init({
            // This is a placeholder - it should be replaced with your publishable API key.
            // Sign in to see your own test API key embedded in code samples.
            // Donâ€™t submit any personally identifiable information in requests made with this key.
            publishableKey: stripe_public_key,
            clientSecret: {
                {
                    client_secret | tojson
                }
            },
        });
    };
</script>
{% endblock %}